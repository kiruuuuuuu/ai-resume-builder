{% load crispy_forms_tags %}
<form @submit.prevent="handleUpdateSubmit" 
      action="{% url 'resumes:resume-builder' %}" 
      method="post" 
      class="space-y-4 bg-slate-50 p-4 rounded-lg border border-gray-200 animate-scale-in" 
      data-section="project"
      role="form"
      aria-label="Edit project">
    {% csrf_token %}
    <input type="hidden" name="action" value="update">
    <input type="hidden" name="model_name" value="project">
    <input type="hidden" name="pk" value="{{ pk }}">
    {{ form|crispy }}
    <div class="flex flex-wrap justify-end items-center gap-3 pt-4 border-t border-gray-300">
        <button type="button" 
                x-show="hasUndoBuffer('description')"
                @click="undoEnhance('description')"
                class="text-sm font-medium text-gray-600 hover:text-gray-800 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-500 rounded px-2 py-1">
            <svg class="inline-block h-4 w-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6" />
            </svg>
            Undo
        </button>
        <button type="button" 
                @click="enhanceText" 
                data-context="project_description" 
                data-target="description" 
                class="text-sm font-medium text-purple-600 hover:text-purple-800 transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500 rounded px-2 py-1">
            <svg class="inline-block h-4 w-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
            </svg>
            Enhance Description
        </button>
        <button type="button" 
                @click="cancelEdit({{ pk }}, 'project')" 
                class="btn-secondary text-sm py-2 px-4">
            Cancel
        </button>
        <button type="submit" 
                class="btn-primary text-sm py-2 px-4">
            <svg class="inline-block h-4 w-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
            </svg>
            Save Changes
        </button>
    </div>
</form>
