<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>{{ resume.profile.full_name }}'s Resume</title>
    <style type="text/css">
        @page {
            size: a4;
            margin: 0.8cm;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
            color: #1a202c;
            font-size: 9.5pt;
            line-height: 1.4;
            background-color: white;
            margin: 0;
            padding: 0;
        }
        
        .resume-container {
            background: white;
            padding: 15px;
            max-width: 100%;
            position: relative;
        }
        
        /* Header - Compact Design */
        .header {
            background: linear-gradient(135deg, {{ accent_color|default:'#667eea' }} 0%, {{ accent_color|default:'#667eea' }}dd 100%);
            color: white;
            padding: 20px 25px;
            margin: -15px -15px 15px -15px;
            border-radius: 0;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            pointer-events: none;
        }
        
        .header-content {
            position: relative;
            z-index: 1;
        }
        
        .name {
            font-size: 28pt;
            font-weight: 800;
            color: white;
            margin: 0 0 8px 0;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            line-height: 1.1;
        }
        
        .contact-info {
            font-size: 8.5pt;
            color: rgba(255, 255, 255, 0.95);
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            align-items: center;
        }
        
        .contact-info span {
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }
        
        .contact-info a {
            color: white;
            text-decoration: none;
            font-weight: 500;
        }
        
        .contact-info a:hover {
            text-decoration: underline;
        }
        
        .contact-separator {
            color: rgba(255, 255, 255, 0.5);
        }
        
        /* Sections - Compact */
        .section {
            margin-bottom: 12px;
            page-break-inside: avoid;
        }
        
        .section-title {
            font-size: 13pt;
            font-weight: 700;
            color: {{ accent_color|default:'#667eea' }};
            margin-bottom: 8px;
            padding-bottom: 4px;
            border-bottom: 2px solid {{ accent_color|default:'#667eea' }};
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .section-icon {
            font-size: 10pt;
            display: inline-block;
        }
        
        /* Summary - Compact */
        .summary {
            background: linear-gradient(to right, #f7fafc 0%, #ffffff 100%);
            padding: 10px 12px;
            border-left: 3px solid {{ accent_color|default:'#667eea' }};
            border-radius: 4px;
            margin-bottom: 12px;
            font-size: 9pt;
            line-height: 1.5;
        }
        
        /* Experience & Education Items - Compact */
        .item {
            margin-bottom: 10px;
            padding: 10px 12px;
            background: #f8f9fa;
            border-radius: 6px;
            border-left: 3px solid {{ accent_color|default:'#667eea' }};
            transition: all 0.2s;
        }
        
        .item-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 6px;
            gap: 10px;
        }
        
        .item-title {
            font-weight: 700;
            font-size: 10.5pt;
            color: #1a202c;
            line-height: 1.3;
        }
        
        .item-subtitle {
            color: #4a5568;
            font-size: 9pt;
            font-style: italic;
            margin-top: 2px;
        }
        
        .item-date {
            color: {{ accent_color|default:'#667eea' }};
            font-weight: 600;
            font-size: 8.5pt;
            white-space: nowrap;
            flex-shrink: 0;
        }
        
        .item-description {
            margin-top: 6px;
            color: #2d3748;
            font-size: 9pt;
        }
        
        .item-description ul {
            padding-left: 18px;
            margin: 0;
        }
        
        .item-description li {
            margin-bottom: 3px;
            line-height: 1.4;
        }
        
        /* Skills - Compact Grid Layout */
        .skills-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
        }
        
        .skill-category {
            margin-bottom: 0;
        }
        
        .skill-category-title {
            font-weight: 700;
            color: #1a202c;
            font-size: 9.5pt;
            margin-bottom: 5px;
            padding-bottom: 2px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .skill-item {
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .skill-name {
            font-size: 8.5pt;
            color: #4a5568;
            min-width: 80px;
            font-weight: 500;
        }
        
        .skill-bar-container {
            flex: 1;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
            position: relative;
        }
        
        .skill-bar {
            height: 100%;
            background: linear-gradient(90deg, {{ accent_color|default:'#667eea' }} 0%, {{ accent_color|default:'#667eea' }}cc 100%);
            border-radius: 4px;
        }
        
        .skill-level {
            font-size: 8pt;
            color: {{ accent_color|default:'#667eea' }};
            font-weight: 600;
            min-width: 35px;
            text-align: right;
        }
        
        /* Languages - Compact */
        .languages-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 6px;
        }
        
        .language-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 8px;
            background: #f8f9fa;
            border-radius: 4px;
        }
        
        .language-name {
            font-weight: 600;
            color: #1a202c;
            font-size: 9pt;
            min-width: 80px;
        }
        
        .proficiency-dots {
            display: flex;
            gap: 4px;
            align-items: center;
        }
        
        .dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }
        
        .dot-filled {
            background: {{ accent_color|default:'#667eea' }};
        }
        
        .dot-empty {
            background: #e2e8f0;
            border: 1px solid #cbd5e0;
        }
        
        .proficiency-text {
            margin-left: 6px;
            color: #718096;
            font-size: 8pt;
        }
        
        /* Projects - Compact */
        .project-item {
            margin-bottom: 10px;
            padding: 10px 12px;
            background: #f8f9fa;
            border-radius: 6px;
            border-left: 3px solid {{ accent_color|default:'#667eea' }};
        }
        
        .project-tech {
            margin-top: 6px;
            font-size: 8.5pt;
            color: #718096;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .project-tech strong {
            color: {{ accent_color|default:'#667eea' }};
            font-weight: 600;
        }
        
        .project-link {
            color: {{ accent_color|default:'#667eea' }};
            text-decoration: none;
            font-weight: 500;
        }
        
        /* Certifications & Achievements - Compact Grid */
        .certs-container, .achievements-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 6px;
        }
        
        .cert-item, .achieve-item {
            padding: 8px 10px;
            background: #f8f9fa;
            border-radius: 4px;
            border-left: 2px solid {{ accent_color|default:'#667eea' }};
            font-size: 8.5pt;
            line-height: 1.4;
        }
        
        .cert-item strong, .achieve-item strong {
            color: {{ accent_color|default:'#667eea' }};
            font-weight: 600;
        }
        
        /* Hobbies - Compact Tags */
        .hobbies {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }
        
        .hobby-tag {
            display: inline-block;
            padding: 4px 10px;
            background: linear-gradient(135deg, {{ accent_color|default:'#667eea' }} 0%, {{ accent_color|default:'#667eea' }}dd 100%);
            color: white;
            border-radius: 12px;
            font-size: 8pt;
            font-weight: 500;
        }
        
        /* Two-column layout for better space usage */
        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 12px;
        }
        
        .single-column {
            grid-column: 1 / -1;
        }
        
        /* Grade/Percentage styling */
        .grade-info {
            margin-top: 4px;
            color: #4a5568;
            font-size: 8.5pt;
        }
        
        .grade-info strong {
            color: {{ accent_color|default:'#667eea' }};
        }
        
        /* Print optimizations */
        @media print {
            .resume-container {
                padding: 0;
            }
            .section {
                page-break-inside: avoid;
            }
            .item {
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <div class="resume-container">
        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <p class="name">{{ resume.profile.full_name|default:resume.profile.user.username }}</p>
                <div class="contact-info">
                    {% if resume.profile.phone_number %}
                    <span><a href="tel:{{ resume.profile.phone_number }}">{{ resume.profile.phone_number }}</a></span>
                    {% endif %}
                    <span><a href="mailto:{{ resume.profile.user.email }}">{{ resume.profile.user.email }}</a></span>
                    {% if resume.profile.address %}
                    <span>{{ resume.profile.address }}</span>
                    {% endif %}
                    {% if resume.profile.portfolio_url %}
                    <span><a href="{{ resume.profile.portfolio_url }}">Portfolio</a></span>
                    {% endif %}
                    {% if resume.profile.linkedin_url %}
                    <span><a href="{{ resume.profile.linkedin_url }}">LinkedIn</a></span>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Professional Summary -->
        {% if resume.profile.professional_summary %}
        <div class="section">
            <h2 class="section-title">
                <span class="section-icon">●</span>Professional Summary
            </h2>
            <div class="summary">
                {{ resume.profile.professional_summary|linebreaksbr }}
            </div>
        </div>
        {% endif %}

        <!-- Main Content: Two Column Layout -->
        <div class="two-column">
            <!-- Left Column -->
            <div>
                <!-- Experience -->
                {% if experiences %}
                <div class="section">
                    <h2 class="section-title">
                        <span class="section-icon">●</span>Experience
                    </h2>
                    {% for exp in experiences %}
                    <div class="item">
                        <div class="item-header">
                            <div style="flex: 1;">
                                <div class="item-title">{{ exp.job_title }}</div>
                                <div class="item-subtitle">{{ exp.company }}{% if exp.location %}, {{ exp.location }}{% endif %}</div>
                            </div>
                            <div class="item-date">{{ exp.start_date|date:"M Y" }} - {% if exp.end_date %}{{ exp.end_date|date:"M Y" }}{% else %}Present{% endif %}</div>
                        </div>
                        {% if exp.description_points %}
                        <div class="item-description">
                            <ul>
                                {% for point in exp.description_points %}
                                <li>{{ point }}</li>
                                {% endfor %}
                            </ul>
                        </div>
                        {% endif %}
                    </div>
                    {% endfor %}
                </div>
                {% endif %}

                <!-- Education -->
                {% if educations %}
                <div class="section">
                    <h2 class="section-title">
                        <span class="section-icon">●</span>Education
                    </h2>
                    {% for edu in educations %}
                    <div class="item">
                        <div class="item-header">
                            <div style="flex: 1;">
                                <div class="item-title">{{ edu.degree }}{% if edu.field_of_study %} in {{ edu.field_of_study }}{% endif %}</div>
                                <div class="item-subtitle">{{ edu.institution }}{% if edu.address %}, {{ edu.address }}{% endif %}</div>
                            </div>
                            <div class="item-date">{{ edu.start_date|date:"M Y" }} - {% if edu.end_date %}{{ edu.end_date|date:"M Y" }}{% else %}Present{% endif %}</div>
                        </div>
                        {% if edu.percentage %}
                        <div class="grade-info">
                            <strong>Grade:</strong> {{ edu.percentage }}
                        </div>
                        {% endif %}
                    </div>
                    {% endfor %}
                </div>
                {% endif %}

                <!-- Projects -->
                {% if projects %}
                <div class="section">
                    <h2 class="section-title">
                        <span class="section-icon">●</span>Projects
                    </h2>
                    {% for p in projects %}
                    <div class="project-item">
                        <div class="item-title">{{ p.title }}</div>
                        {% if p.aim %}
                        <div class="item-subtitle" style="margin-top: 3px;">{{ p.aim }}</div>
                        {% endif %}
                        {% if p.description_points %}
                        <div class="item-description" style="margin-top: 6px;">
                            <ul>
                                {% for point in p.description_points %}
                                <li>{{ point }}</li>
                                {% endfor %}
                            </ul>
                        </div>
                        {% endif %}
                        <div class="project-tech">
                            {% if p.frontend %}<span><strong>Frontend:</strong> {{ p.frontend }}</span>{% endif %}
                            {% if p.backend %}<span><strong>Backend:</strong> {{ p.backend }}</span>{% endif %}
                            {% if p.database %}<span><strong>Database:</strong> {{ p.database }}</span>{% endif %}
                            {% if p.link %}<span><strong>Link:</strong> <a href="{{ p.link }}" class="project-link">{{ p.link }}</a></span>{% endif %}
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% endif %}
            </div>

            <!-- Right Column -->
            <div>
                <!-- Skills -->
                {% if skills_by_category %}
                <div class="section">
                    <h2 class="section-title">
                        <span class="section-icon">●</span>Skills
                    </h2>
                    <div class="skills-container">
                        {% for category, skills in skills_by_category.items %}
                        <div class="skill-category">
                            <div class="skill-category-title">{{ category }}</div>
                            {% for skill in skills %}
                            <div class="skill-item">
                                <span class="skill-name">{{ skill }}</span>
                                <span class="skill-bar-container">
                                    <span class="skill-bar" style="width: {% cycle '85' '90' '75' '80' '95' '70' '88' '82' %}%;"></span>
                                </span>
                                <span class="skill-level">{% cycle '85%' '90%' '75%' '80%' '95%' '70%' '88%' '82%' %}</span>
                            </div>
                            {% endfor %}
                        </div>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}

                <!-- Languages -->
                {% if languages %}
                <div class="section">
                    <h2 class="section-title">
                        <span class="section-icon">●</span>Languages
                    </h2>
                    <div class="languages-container">
                        {% for lang in languages %}
                        <div class="language-item">
                            <span class="language-name">{{ lang.name }}</span>
                            <span class="proficiency-dots">
                                {% if lang.proficiency == 'Fluent' %}
                                    <span class="dot dot-filled"></span>
                                    <span class="dot dot-filled"></span>
                                    <span class="dot dot-filled"></span>
                                    <span class="dot dot-filled"></span>
                                    <span class="dot dot-filled"></span>
                                {% elif lang.proficiency == 'Advanced' %}
                                    <span class="dot dot-filled"></span>
                                    <span class="dot dot-filled"></span>
                                    <span class="dot dot-filled"></span>
                                    <span class="dot dot-filled"></span>
                                    <span class="dot dot-empty"></span>
                                {% elif lang.proficiency == 'Intermediate' %}
                                    <span class="dot dot-filled"></span>
                                    <span class="dot dot-filled"></span>
                                    <span class="dot dot-filled"></span>
                                    <span class="dot dot-empty"></span>
                                    <span class="dot dot-empty"></span>
                                {% else %}
                                    <span class="dot dot-filled"></span>
                                    <span class="dot dot-filled"></span>
                                    <span class="dot dot-empty"></span>
                                    <span class="dot dot-empty"></span>
                                    <span class="dot dot-empty"></span>
                                {% endif %}
                            </span>
                            <span class="proficiency-text">({{ lang.get_proficiency_display }})</span>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}

                <!-- Certifications -->
                {% if certifications %}
                <div class="section">
                    <h2 class="section-title">
                        <span class="section-icon">●</span>Certifications
                    </h2>
                    <div class="certs-container">
                        {% for cert in certifications %}
                        <div class="cert-item">
                            <strong>{{ cert.name }}</strong><br>
                            <em>{{ cert.issuing_organization }}</em>
                            {% if cert.date_issued %} ({{ cert.date_issued|date:"M Y" }}){% endif %}
                        </div>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}

                <!-- Achievements -->
                {% if achievements %}
                <div class="section">
                    <h2 class="section-title">
                        <span class="section-icon">●</span>Achievements
                    </h2>
                    <div class="achievements-container">
                        {% for a in achievements %}
                        <div class="achieve-item">
                            {% if a.name %}<strong>{{ a.name }}:</strong> {% endif %}{{ a.description }}
                        </div>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}

                <!-- Hobbies -->
                {% if hobbies %}
                <div class="section">
                    <h2 class="section-title">
                        <span class="section-icon">●</span>Hobbies
                    </h2>
                    <div class="hobbies">
                        {% for hobby in hobbies %}
                        <span class="hobby-tag">{{ hobby }}</span>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</body>
</html>
