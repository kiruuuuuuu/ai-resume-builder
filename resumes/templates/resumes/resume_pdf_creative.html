<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>{{ resume.profile.full_name }}'s Resume</title>
    <style type="text/css">
        @page {
            size: a4;
            margin: 1.5cm;
        }
        body {
            font-family: 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
            color: #2d3748;
            font-size: 10pt;
            line-height: 1.5;
            background-color: white;
            margin: 0;
            padding: 20px;
        }
        
        .resume-container {
            background: white;
            padding: 25px;
            border-radius: 10px;
            max-width: 100%;
            box-sizing: border-box;
            border: 2px solid {{ accent_color|default:'#667eea' }};
            position: relative;
        }
        
        /* Add accent color border only for PDF generation */
        @media print {
            body {
                background-color: {{ accent_color|default:'#667eea' }};
            }
        }
        
        /* Header */
        .header {
            text-align: center;
            padding: 20px;
            border-bottom: 3px solid {{ accent_color|default:'#667eea' }};
            margin-bottom: 25px;
            position: relative;
            border-radius: 8px;
        }
        
        /* Create lighter background using overlay technique */
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: {{ accent_color|default:'#667eea' }};
            opacity: 0.15;
            border-radius: 8px;
            z-index: 0;
            pointer-events: none;
        }
        
        .header .name,
        .header .contact-info {
            position: relative;
            z-index: 1;
        }
        
        .name {
            font-size: 32pt;
            font-weight: 700;
            color: {{ accent_color|default:'#667eea' }};
            margin: 0;
            letter-spacing: 1px;
            text-transform: uppercase;
        }
        
        .contact-info {
            font-size: 9.5pt;
            color: #4a5568;
            margin-top: 10px;
        }
        
        .contact-info a {
            color: {{ accent_color|default:'#667eea' }};
            text-decoration: none;
            font-weight: 500;
        }
        
        /* Sections */
        .section {
            margin-bottom: 25px;
            page-break-inside: avoid;
        }
        
        .section-title {
            font-size: 16pt;
            font-weight: 700;
            color: {{ accent_color|default:'#667eea' }};
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid {{ accent_color|default:'#667eea' }};
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .section-title-prefix {
            display: inline-block;
            margin-right: 8px;
            font-size: 16pt;
        }
        
        /* Summary */
        .summary {
            background: #f7fafc;
            padding: 15px;
            border-left: 4px solid {{ accent_color|default:'#667eea' }};
            border-radius: 5px;
            margin-bottom: 20px;
        }
        
        /* Experience & Education Items */
        .item {
            margin-bottom: 20px;
            padding: 15px;
            background: #f7fafc;
            border-radius: 8px;
            border-left: 4px solid {{ accent_color|default:'#667eea' }};
        }
        
        .item-header {
            display: table;
            width: 100%;
            margin-bottom: 8px;
        }
        .item-header > div:first-child {
            display: table-cell;
            vertical-align: top;
            width: 70%;
        }
        .item-header > div:last-child {
            display: table-cell;
            vertical-align: top;
            text-align: right;
            width: 30%;
        }
        
        .item-title {
            font-weight: 700;
            font-size: 12pt;
            color: #2d3748;
        }
        
        .item-subtitle {
            color: #4a5568;
            font-size: 10pt;
            font-style: italic;
            margin-top: 3px;
        }
        
        .item-date {
            color: {{ accent_color|default:'#667eea' }};
            font-weight: 600;
            font-size: 9.5pt;
        }
        
        .item-description {
            margin-top: 10px;
            color: #4a5568;
        }
        
        .item-description ul {
            padding-left: 20px;
            margin: 5px 0;
        }
        
        .item-description li {
            margin-bottom: 5px;
        }
        
        /* Skills with Visual Bars */
        .skill-category {
            margin-bottom: 15px;
        }
        
        .skill-category-title {
            font-weight: 700;
            color: #2d3748;
            font-size: 10.5pt;
            margin-bottom: 8px;
        }
        
        .skill-item {
            margin-bottom: 10px;
        }
        
        .skill-name {
            display: inline-block;
            width: 150px;
            font-size: 9.5pt;
            color: #4a5568;
            vertical-align: middle;
        }
        
        .skill-bar-container {
            display: inline-block;
            width: 200px;
            height: 12px;
            background: #e2e8f0;
            border-radius: 6px;
            overflow: hidden;
            vertical-align: middle;
        }
        
        .skill-bar {
            height: 100%;
            background-color: {{ accent_color|default:'#667eea' }};
            border-radius: 6px;
        }
        
        .skill-level {
            display: inline-block;
            margin-left: 10px;
            font-size: 9pt;
            color: {{ accent_color|default:'#667eea' }};
            font-weight: 600;
            vertical-align: middle;
        }
        
        /* Languages with Proficiency Dots */
        .language-item {
            margin-bottom: 12px;
            display: table;
            width: 100%;
        }
        .language-name {
            display: table-cell;
            vertical-align: middle;
            width: 120px;
            font-weight: 600;
            color: #2d3748;
            font-size: 10pt;
        }
        .proficiency-dots {
            display: table-cell;
            vertical-align: middle;
            padding-left: 15px;
        }
        
        .dot {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 5px;
        }
        
        .dot-filled {
            background: {{ accent_color|default:'#667eea' }};
        }
        
        .dot-empty {
            background: #e2e8f0;
            border: 1px solid #cbd5e0;
        }
        
        /* Projects */
        .project-item {
            margin-bottom: 20px;
            padding: 15px;
            background: #f7fafc;
            border-radius: 8px;
        }
        
        .project-tech {
            margin-top: 10px;
            font-size: 9pt;
            color: #718096;
        }
        
        .project-tech strong {
            color: {{ accent_color|default:'#667eea' }};
        }
        
        /* Certifications & Achievements */
        .cert-item, .achieve-item {
            margin-bottom: 10px;
            padding: 10px;
            background: #f7fafc;
            border-radius: 5px;
            border-left: 3px solid {{ accent_color|default:'#667eea' }};
        }
        
        .cert-item strong, .achieve-item strong {
            color: {{ accent_color|default:'#667eea' }};
        }
        
        /* Hobbies */
        .hobbies {
            display: block;
        }
        .hobby-tag {
            margin-right: 8px;
            margin-bottom: 8px;
        }
        
        .hobby-tag {
            display: inline-block;
            padding: 5px 12px;
            background: {{ accent_color|default:'#667eea' }};
            color: white;
            border-radius: 15px;
            font-size: 9pt;
            font-weight: 500;
        }
    </style>
</head>
<body>
    <div class="resume-container">
        <!-- Header -->
        <div class="header">
            <p class="name">{{ resume.profile.full_name|default:resume.profile.user.username }}</p>
            <div class="contact-info">
                {% if resume.profile.phone_number %}<a href="tel:{{ resume.profile.phone_number }}">{{ resume.profile.phone_number }}</a><span> | </span>{% endif %}
                <a href="mailto:{{ resume.profile.user.email }}">{{ resume.profile.user.email }}</a>
                {% if resume.profile.address %}<span> | </span>{{ resume.profile.address }}{% endif %}
                {% if resume.profile.portfolio_url %}<span> | </span><a href="{{ resume.profile.portfolio_url }}">Portfolio</a>{% endif %}
                {% if resume.profile.linkedin_url %}<span> | </span><a href="{{ resume.profile.linkedin_url }}">LinkedIn</a>{% endif %}
            </div>
        </div>

        <!-- Professional Summary -->
        {% if resume.profile.professional_summary %}
        <div class="section">
            <h2 class="section-title"><span class="section-title-prefix">▶</span>Summary</h2>
            <div class="summary">
                <p>{{ resume.profile.professional_summary|linebreaksbr }}</p>
            </div>
        </div>
        {% endif %}

        <!-- Experience -->
        {% if experiences %}
        <div class="section">
            <h2 class="section-title"><span class="section-title-prefix">▶</span>Work Experience</h2>
            {% for exp in experiences %}
            <div class="item">
                <div class="item-header">
                    <div>
                        <div class="item-title">{{ exp.job_title }}</div>
                        <div class="item-subtitle">{{ exp.company }}</div>
                    </div>
                    <div class="item-date">{{ exp.start_date|date:"M Y" }} - {% if exp.end_date %}{{ exp.end_date|date:"M Y" }}{% else %}Present{% endif %}</div>
                </div>
                {% if exp.description_points %}
                <div class="item-description">
                    <ul>
                        {% for point in exp.description_points %}
                        <li>{{ point }}</li>
                        {% endfor %}
                    </ul>
                </div>
                {% endif %}
            </div>
            {% endfor %}
        </div>
        {% endif %}

        <!-- Education -->
        {% if educations %}
        <div class="section">
            <h2 class="section-title"><span class="section-title-prefix">▶</span>Education</h2>
            {% for edu in educations %}
            <div class="item">
                <div class="item-header">
                    <div>
                        <div class="item-title">{{ edu.degree }} in {{ edu.field_of_study }}</div>
                        <div class="item-subtitle">{{ edu.institution }}{% if edu.address %}, {{ edu.address }}{% endif %}</div>
                    </div>
                    <div class="item-date">{{ edu.start_date|date:"M Y" }} - {% if edu.end_date %}{{ edu.end_date|date:"M Y" }}{% else %}Present{% endif %}</div>
                </div>
                {% if edu.percentage %}<div style="margin-top: 8px; color: #4a5568;"><strong>Grade:</strong> {{ edu.percentage }}</div>{% endif %}
            </div>
            {% endfor %}
        </div>
        {% endif %}

        <!-- Skills with Visual Bars -->
        {% if skills_by_category %}
        <div class="section">
            <h2 class="section-title"><span class="section-title-prefix">▶</span>Skills</h2>
            {% for category, skills in skills_by_category.items %}
            <div class="skill-category">
                <div class="skill-category-title">{{ category }}</div>
                {% for skill in skills %}
                <div class="skill-item">
                    <span class="skill-name">{{ skill }}</span>
                    <span class="skill-bar-container">
                        <span class="skill-bar" style="width: {% cycle '85' '90' '75' '80' '95' '70' %}%;"></span>
                    </span>
                    <span class="skill-level">{% cycle '85%' '90%' '75%' '80%' '95%' '70%' %}</span>
                </div>
                {% endfor %}
            </div>
            {% endfor %}
        </div>
        {% endif %}

        <!-- Projects -->
        {% if projects %}
        <div class="section">
            <h2 class="section-title"><span class="section-title-prefix">▶</span>Projects</h2>
            {% for p in projects %}
            <div class="project-item">
                <div class="item-title">{{ p.title }}</div>
                {% if p.aim %}<div class="item-subtitle" style="margin-top: 5px;">{{ p.aim }}</div>{% endif %}
                {% if p.description_points %}
                <div class="item-description" style="margin-top: 10px;">
                    <ul>
                        {% for point in p.description_points %}
                        <li>{{ point }}</li>
                        {% endfor %}
                    </ul>
                </div>
                {% endif %}
                <div class="project-tech">
                    {% if p.frontend %}<strong>Frontend:</strong> {{ p.frontend }} | {% endif %}
                    {% if p.backend %}<strong>Backend:</strong> {{ p.backend }} | {% endif %}
                    {% if p.database %}<strong>Database:</strong> {{ p.database }}{% endif %}
                    {% if p.link %}<br><strong>Link:</strong> <a href="{{ p.link }}">{{ p.link }}</a>{% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
        {% endif %}

        <!-- Languages with Proficiency Dots -->
        {% if languages %}
        <div class="section">
            <h2 class="section-title"><span class="section-title-prefix">▶</span>Languages</h2>
            {% for lang in languages %}
            <div class="language-item">
                <span class="language-name">{{ lang.name }}</span>
                <span class="proficiency-dots">
                    {% if lang.proficiency == 'Fluent' %}
                        <span class="dot dot-filled"></span><span class="dot dot-filled"></span><span class="dot dot-filled"></span><span class="dot dot-filled"></span><span class="dot dot-filled"></span>
                    {% elif lang.proficiency == 'Advanced' %}
                        <span class="dot dot-filled"></span><span class="dot dot-filled"></span><span class="dot dot-filled"></span><span class="dot dot-filled"></span><span class="dot dot-empty"></span>
                    {% elif lang.proficiency == 'Intermediate' %}
                        <span class="dot dot-filled"></span><span class="dot dot-filled"></span><span class="dot dot-filled"></span><span class="dot dot-empty"></span><span class="dot dot-empty"></span>
                    {% else %}
                        <span class="dot dot-filled"></span><span class="dot dot-filled"></span><span class="dot dot-empty"></span><span class="dot dot-empty"></span><span class="dot dot-empty"></span>
                    {% endif %}
                </span>
                <span style="margin-left: 10px; color: #718096; font-size: 9pt;">({{ lang.get_proficiency_display }})</span>
            </div>
            {% endfor %}
        </div>
        {% endif %}

        <!-- Certifications -->
        {% if certifications %}
        <div class="section">
            <h2 class="section-title"><span class="section-title-prefix">▶</span>Certifications</h2>
            {% for cert in certifications %}
            <div class="cert-item">
                <strong>{{ cert.name }}</strong> - <em>{{ cert.issuing_organization }}</em> {% if cert.date_issued %}({{ cert.date_issued|date:"M Y" }}){% endif %}
            </div>
            {% endfor %}
        </div>
        {% endif %}

        <!-- Achievements -->
        {% if achievements %}
        <div class="section">
            <h2 class="section-title"><span class="section-title-prefix">▶</span>Achievements</h2>
            {% for a in achievements %}
            <div class="achieve-item">
                {% if a.name %}<strong>{{ a.name }}:</strong> {% endif %}{{ a.description }}
            </div>
            {% endfor %}
        </div>
        {% endif %}

        <!-- Hobbies -->
        {% if hobbies %}
        <div class="section">
            <h2 class="section-title"><span class="section-title-prefix">▶</span>Hobbies & Interests</h2>
            <div class="hobbies">
                {% for hobby in hobbies %}
                <span class="hobby-tag">{{ hobby }}</span>
                {% endfor %}
            </div>
        </div>
        {% endif %}
    </div>
</body>
</html>

